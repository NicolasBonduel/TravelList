(self.webpackChunkmain=self.webpackChunkmain||[]).push([[609],{609:(e,s,a)=>{"use strict";a.d(s,{Z:()=>x});var t=a(294),l=a(697),n=a.n(l),r=a(669),i=a.n(r);const o=function(e,s){const[a,l]=(0,t.useState)((()=>JSON.parse(localStorage.getItem(e))||s));return(0,t.useEffect)((()=>{localStorage.setItem(e,JSON.stringify(a))}),[e,a]),[a,l]},c={main:"_1DR5hTvoQTIN9zUhZYa7cU",todoListContainer:"_3nz_KllTHkcn7Q84rbnibk",complete:"_3PUbhLlOHfjTH4PlERs5Pj",selected:"_3p1_myTcTQQxXf280XJV8P",label:"_31iMYVDyy-XE-zmIeFFgHk",skeletonButton:"_3VArkizNLYVukpYhpncyCn",skeletonLabel:"_1975fOA85nJehEpHM6gOIy",shimmer:"_2EH3xRerEEJLfWBkVP4cvF"};var u=a(893);const d=({allCountries:e,searchValue:s,loading:a})=>{const[l,n]=o("selectedCountryCodes",[]),[r,i]=(0,t.useState)([]);(0,t.useEffect)((()=>{const a=e.filter((e=>l.includes(e.alpha3Code)));s.length?i([...a,...e.filter((e=>(e.name.toUpperCase().startsWith(s.toUpperCase())||e.alpha3Code.toUpperCase().startsWith(s.toUpperCase()))&&!l.includes(e.alpha3Code)))]):i(a)}),[e,s,l]);return(!a||l.length||s.length)&&(a||r.length)?(0,u.jsx)("section",{className:c.main,children:(0,u.jsx)("ul",{className:c.todoListContainer,children:a?(0,u.jsx)("div",{"aria-busy":!0,"data-testid":"loading",children:[...Array(l.length||5)].map(((e,s)=>(0,u.jsxs)("li",{children:[(0,u.jsx)("div",{className:c.skeletonButton}),(0,u.jsx)("div",{className:c.label,children:(0,u.jsx)("div",{className:c.skeletonLabel})})]},s)))}):(0,u.jsx)(u.Fragment,{children:r.map((({name:e,alpha3Code:s})=>(0,u.jsxs)("li",{children:[(0,u.jsx)("button",{id:s,"aria-label":"Add or remove country from my list",className:[c.complete,l.includes(s)?c.selected:null].join(" "),onClick:()=>{return e=s,void(l.includes(e)?n((s=>s.filter((s=>s!==e)))):n((s=>[...s,e])));var e},tabIndex:0,type:"button"}),(0,u.jsx)("label",{htmlFor:s,className:c.label,children:e})]},s)))})})}):null};d.defaultProps={allCountries:[]},d.propTypes={allCountries:n().arrayOf(n().shape({name:n().string.isRequired,alpha3Code:n().string.isRequired})),searchValue:n().string.isRequired,loading:n().bool.isRequired};const h=d,p="_3dt1VrnK_Lk2Kl1zFVcrXC",m=({useAxios:e,defaultSearchValue:s})=>{const[a,l]=(0,t.useState)(s),{response:n,loading:r}=e("https://restcountries.eu/rest/v2/all?fields=name;alpha3Code");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{className:p,placeholder:"Country I want to visit",value:a,onChange:e=>l(e.target.value),type:"search",autoFocus:!0}),(0,u.jsx)(h,{allCountries:n,searchValue:a,loading:r})]})};m.defaultProps={useAxios:e=>{const[s,a]=(0,t.useState)(),[l,n]=(0,t.useState)(null),[r,o]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{(async e=>{try{const s=await i().request(e);a(s.data)}catch(s){n(s)}finally{o(!1)}})(e)}),[e]),{response:s,error:l,loading:r}},defaultSearchValue:""},m.propTypes={useAxios:n().func,defaultSearchValue:n().string};const f=m,g="_3NjMb7zqncvKm9FHoYgc5C",C="z4QkGpZfp9N_1DzgYwioN",x=()=>(0,u.jsxs)("section",{className:g,children:[(0,u.jsx)("header",{className:C,children:(0,u.jsx)("h1",{children:"Travel-List"})}),(0,u.jsx)(f,{})]})}}]);